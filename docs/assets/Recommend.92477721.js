import{aG as me,Z as $e,bd as Me,z as fe,aN as Ae,D as B,c as V,u as e,be as re,J as H,L as pe,a0 as Le,M as ze,K as Pe,V as Oe,S as he,d as Q,j as ge,o as y,a as L,a4 as S,e as j,w as M,Q as Z,a5 as O,aB as W,b as A,O as ie,b5 as Re,R as q,T as ue,ah as D,H as Ve,k as _e,am as se,F as G,r as Y,t as J,n as ye,B as Ue,I as Ce,bf as He,bg as je,a6 as De,a7 as Fe,_ as Ke,a8 as We,ap as Ge,b9 as Je,bh as Qe,as as Xe,i as Ye,f as ce,bi as de,at as Ze,bj as qe,aj as xe,ak as et}from"./index.dcf9e471.js";import{C as te}from"./index.e79521d8.js";import{b as tt,C as st,a as at,p as ot}from"./recommend.85bf8557.js";import{u as nt}from"./typeFormate.f6de6737.js";import"./count.b035295c.js";const Ie=Symbol("carouselContextKey"),lt=(n,C,u)=>$e(n.subTree).filter(c=>{var s;return Me(c)&&((s=c.type)==null?void 0:s.name)===C&&!!c.component}).map(c=>c.component.uid).map(c=>u[c]).filter(c=>!!c),rt=(n,C)=>{const u={},a=me([]);return{children:a,addChild:s=>{u[s.uid]=s,a.value=lt(n,C,u)},removeChild:s=>{delete u[s],a.value=a.value.filter(v=>v.uid!==s)}}},it=fe({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},indicator:{type:Boolean,default:!0},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),ut={change:(n,C)=>[n,C].every(Ae)},ve=300,ct=(n,C,u)=>{const{children:a,addChild:w,removeChild:c}=rt(he(),"ElCarouselItem"),s=B(-1),v=B(null),I=B(!1),k=B(),E=V(()=>n.arrow!=="never"&&!e(r)),T=V(()=>a.value.some(o=>o.props.label.toString().length>0)),b=V(()=>n.type==="card"),r=V(()=>n.direction==="vertical"),p=re(o=>{t(o)},ve,{trailing:!0}),f=re(o=>{U(o)},ve);function N(){v.value&&(clearInterval(v.value),v.value=null)}function $(){n.interval<=0||!n.autoplay||v.value||(v.value=setInterval(()=>R(),n.interval))}const R=()=>{s.value<a.value.length-1?s.value=s.value+1:n.loop&&(s.value=0)};function t(o){if(Oe(o)){const F=a.value.filter(X=>X.props.name===o);F.length>0&&(o=a.value.indexOf(F[0]))}if(o=Number(o),Number.isNaN(o)||o!==Math.floor(o))return;const _=a.value.length,P=s.value;o<0?s.value=n.loop?_-1:0:o>=_?s.value=n.loop?0:_-1:s.value=o,P===s.value&&i(P),ae()}function i(o){a.value.forEach((_,P)=>{_.translateItem(P,s.value,o)})}function l(o,_){var P,F,X,oe;const K=e(a),ne=K.length;if(ne===0||!o.states.inStage)return!1;const Se=_+1,we=_-1,le=ne-1,Te=K[le].states.active,Ne=K[0].states.active,Be=(F=(P=K[Se])==null?void 0:P.states)==null?void 0:F.active,Ee=(oe=(X=K[we])==null?void 0:X.states)==null?void 0:oe.active;return _===le&&Ne||Be?"left":_===0&&Te||Ee?"right":!1}function h(){I.value=!0,n.pauseOnHover&&N()}function z(){I.value=!1,$()}function m(o){e(r)||a.value.forEach((_,P)=>{o===l(_,P)&&(_.states.hover=!0)})}function d(){e(r)||a.value.forEach(o=>{o.states.hover=!1})}function g(o){s.value=o}function U(o){n.trigger==="hover"&&o!==s.value&&(s.value=o)}function x(){t(s.value-1)}function be(){t(s.value+1)}function ae(){N(),$()}H(()=>s.value,(o,_)=>{i(_),_>-1&&C("change",o,_)}),H(()=>n.autoplay,o=>{o?$():N()}),H(()=>n.loop,()=>{t(s.value)}),H(()=>n.interval,()=>{ae()}),H(()=>a.value,()=>{a.value.length>0&&t(n.initialIndex)});const ee=me();return pe(()=>{ee.value=Le(k.value,()=>{i()}),$()}),ze(()=>{N(),k.value&&ee.value&&ee.value.stop()}),Pe(Ie,{root:k,isCardType:b,isVertical:r,items:a,loop:n.loop,addItem:w,removeItem:c,setActiveItem:t}),{root:k,activeIndex:s,arrowDisplay:E,hasLabel:T,hover:I,isCardType:b,items:a,handleButtonEnter:m,handleButtonLeave:d,handleIndicatorClick:g,handleMouseEnter:h,handleMouseLeave:z,setActiveItem:t,prev:x,next:be,throttledArrowClick:p,throttledIndicatorHover:f}},dt=["onMouseenter","onClick"],vt={key:0},mt="ElCarousel",ft=Q({name:mt}),pt=Q({...ft,props:it,emits:ut,setup(n,{expose:C,emit:u}){const a=n,{root:w,activeIndex:c,arrowDisplay:s,hasLabel:v,hover:I,isCardType:k,items:E,handleButtonEnter:T,handleButtonLeave:b,handleIndicatorClick:r,handleMouseEnter:p,handleMouseLeave:f,setActiveItem:N,prev:$,next:R,throttledArrowClick:t,throttledIndicatorHover:i}=ct(a,u),l=ge("carousel"),h=V(()=>{const m=[l.b(),l.m(a.direction)];return e(k)&&m.push(l.m("card")),m}),z=V(()=>{const m=[l.e("indicators"),l.em("indicators",a.direction)];return e(v)&&m.push(l.em("indicators","labels")),(a.indicatorPosition==="outside"||e(k))&&m.push(l.em("indicators","outside")),m});return C({setActiveItem:N,prev:$,next:R}),(m,d)=>(y(),L("div",{ref_key:"root",ref:w,class:O(e(h)),onMouseenter:d[6]||(d[6]=W((...g)=>e(p)&&e(p)(...g),["stop"])),onMouseleave:d[7]||(d[7]=W((...g)=>e(f)&&e(f)(...g),["stop"]))},[S("div",{class:O(e(l).e("container")),style:se({height:m.height})},[e(s)?(y(),j(ue,{key:0,name:"carousel-arrow-left",persisted:""},{default:M(()=>[Z(S("button",{type:"button",class:O([e(l).e("arrow"),e(l).em("arrow","left")]),onMouseenter:d[0]||(d[0]=g=>e(T)("left")),onMouseleave:d[1]||(d[1]=(...g)=>e(b)&&e(b)(...g)),onClick:d[2]||(d[2]=W(g=>e(t)(e(c)-1),["stop"]))},[A(e(ie),null,{default:M(()=>[A(e(Re))]),_:1})],34),[[q,(m.arrow==="always"||e(I))&&(a.loop||e(c)>0)]])]),_:1})):D("v-if",!0),e(s)?(y(),j(ue,{key:1,name:"carousel-arrow-right",persisted:""},{default:M(()=>[Z(S("button",{type:"button",class:O([e(l).e("arrow"),e(l).em("arrow","right")]),onMouseenter:d[3]||(d[3]=g=>e(T)("right")),onMouseleave:d[4]||(d[4]=(...g)=>e(b)&&e(b)(...g)),onClick:d[5]||(d[5]=W(g=>e(t)(e(c)+1),["stop"]))},[A(e(ie),null,{default:M(()=>[A(e(Ve))]),_:1})],34),[[q,(m.arrow==="always"||e(I))&&(a.loop||e(c)<e(E).length-1)]])]),_:1})):D("v-if",!0),_e(m.$slots,"default")],6),m.indicatorPosition!=="none"?(y(),L("ul",{key:0,class:O(e(z))},[(y(!0),L(G,null,Y(e(E),(g,U)=>(y(),L("li",{key:U,class:O([e(l).e("indicator"),e(l).em("indicator",m.direction),e(l).is("active",U===e(c))]),onMouseenter:x=>e(i)(U),onClick:W(x=>e(r)(U),["stop"])},[S("button",{class:O(e(l).e("button"))},[e(v)?(y(),L("span",vt,J(g.props.label),1)):D("v-if",!0)],2)],42,dt))),128))],2)):D("v-if",!0)],34))}});var ht=ye(pt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const gt=fe({name:{type:String,default:""},label:{type:[String,Number],default:""}}),_t=(n,C)=>{const u=Ue(Ie),a=he(),w=.83,c=B(!1),s=B(0),v=B(1),I=B(!1),k=B(!1),E=B(!1),T=B(!1),{isCardType:b,isVertical:r}=u;function p(t,i,l){const h=l-1,z=i-1,m=i+1,d=l/2;return i===0&&t===h?-1:i===h&&t===0?l:t<z&&i-t>=d?l+1:t>m&&t-i>=d?-2:t}function f(t,i){var l;const h=((l=u.root.value)==null?void 0:l.offsetWidth)||0;return E.value?h*((2-w)*(t-i)+1)/4:t<i?-(1+w)*h/4:(3+w)*h/4}function N(t,i,l){const h=u.root.value;return h?((l?h.offsetHeight:h.offsetWidth)||0)*(t-i):0}const $=(t,i,l)=>{var h;const z=e(b),m=(h=u.items.value.length)!=null?h:Number.NaN,d=t===i;!z&&!je(l)&&(T.value=d||t===l),!d&&m>2&&u.loop&&(t=p(t,i,m));const g=e(r);I.value=d,z?(E.value=Math.round(Math.abs(t-i))<=1,s.value=f(t,i),v.value=e(I)?1:w):s.value=N(t,i,g),k.value=!0};function R(){if(u&&e(b)){const t=u.items.value.findIndex(({uid:i})=>i===a.uid);u.setActiveItem(t)}}return pe(()=>{u.addItem({props:n,states:Ce({hover:c,translate:s,scale:v,active:I,ready:k,inStage:E,animating:T}),uid:a.uid,translateItem:$})}),He(()=>{u.removeItem(a.uid)}),{active:I,animating:T,hover:c,inStage:E,isVertical:r,translate:s,isCardType:b,scale:v,ready:k,handleItemClick:R}},yt=Q({name:"ElCarouselItem"}),Ct=Q({...yt,props:gt,setup(n){const C=n,u=ge("carousel"),{active:a,animating:w,hover:c,inStage:s,isVertical:v,translate:I,isCardType:k,scale:E,ready:T,handleItemClick:b}=_t(C),r=V(()=>{const f=`${`translate${e(v)?"Y":"X"}`}(${e(I)}px)`,N=`scale(${e(E)})`;return{transform:[f,N].join(" ")}});return(p,f)=>Z((y(),L("div",{class:O([e(u).e("item"),e(u).is("active",e(a)),e(u).is("in-stage",e(s)),e(u).is("hover",e(c)),e(u).is("animating",e(w)),{[e(u).em("item","card")]:e(k)}]),style:se(e(r)),onClick:f[0]||(f[0]=(...N)=>e(b)&&e(b)(...N))},[e(k)?Z((y(),L("div",{key:0,class:O(e(u).e("mask"))},null,2)),[[q,!e(a)]]):D("v-if",!0),_e(p.$slots,"default")],6)),[[q,e(T)]])}});var ke=ye(Ct,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const It=De(ht,{CarouselItem:ke}),kt=Fe(ke);var bt="/vue3-music/assets/dailySongsBg.2d9b6e0f.jpg";const St=n=>(xe("data-v-d7c39b90"),n=n(),et(),n),wt={class:"banner-item"},Tt={class:"playlists"},Nt={class:"flex-vertical-center m-0"},Bt={class:"grid-col5"},Et=St(()=>S("div",null,"\u6BCF\u65E5\u6B4C\u66F2\u63A8\u8350",-1)),$t={class:"top-songs"},Mt={class:"flex-vertical-center m-0"},At={class:"grid-col3"},Lt={class:"text-12"},zt=Q({__name:"Recommend",setup(n){const C=Ze(),{playImmediately:u}=We(),a=B([]);tt().then(r=>{a.value=r});const w=B(0);function c(r){w.value=r}function s(r){const p=a.value.findIndex(f=>f.imageUrl===r.imageUrl);w.value===p&&(r.targetType===1?qe([r.targetId]).then(f=>{u(f)}):r.targetType===10?C.push(`/playlist/${r.targetId}`):window.open(r.url,"_blank"))}const v=B([]),{hasLogin:I}=Ge(Je());H(I,r=>{r?at().then(p=>{v.value=p.slice(0,9)}):ot(10).then(p=>{v.value=p})},{immediate:!0});function k(r){C.push(`/playlist/${r}`)}function E(){C.push("/dailySongs")}const T=Ce([]);function b(r){const p=T.findIndex(f=>f.id===r);u(nt(T[p]))}return Qe(0).then(r=>{T.push(...r.slice(0,12))}),(r,p)=>{const f=Xe,N=kt,$=It,R=Ye("router-link");return y(),L(G,null,[A($,{interval:4e3,type:"card",height:"220px",onChange:c},{default:M(()=>[(y(!0),L(G,null,Y(a.value,(t,i)=>(y(),j(N,{key:i,onClick:l=>s(t)},{default:M(()=>[S("div",wt,[A(f,{src:t.imageUrl},null,8,["src"]),S("div",{class:"title",style:se({backgroundColor:t.titleColor})},J(t.typeTitle),5)])]),_:2},1032,["onClick"]))),128))]),_:1}),S("div",Tt,[A(R,{to:"/discover/playlist"},{default:M(()=>[S("h3",Nt,[ce("\u63A8\u8350\u6B4C\u5355"),A(e(de),{theme:"outline",size:"22"})])]),_:1}),S("div",Bt,[e(I)?(y(),j(te,{key:0,class:"relative daily-songs",mode:"vertical","image-url":e(bt),"icon-placement":"bottom-right","icon-transition":"",onClick:E},{default:M(()=>[A(e(st),{theme:"outline",fill:"#ffffff"}),Et]),_:1},8,["image-url"])):D("",!0),(y(!0),L(G,null,Y(v.value,t=>(y(),j(te,{mode:"vertical","image-url":t.picUrl,"icon-placement":"bottom-right","icon-transition":"",onClick:i=>k(t.id)},{default:M(()=>[S("div",null,J(t.name),1)]),_:2},1032,["image-url","onClick"]))),256))])]),S("div",$t,[A(R,{to:"/discover/new/songs"},{default:M(()=>[S("h3",Mt,[ce("\u6700\u65B0\u97F3\u4E50"),A(e(de),{theme:"outline",size:"22"})])]),_:1}),S("div",At,[(y(!0),L(G,null,Y(T,t=>(y(),j(te,{mode:"horizontal","image-url":t.album.picUrl,"image-size":"100px","icon-placement":"center","icon-transition":"",onClick:i=>b(t.id)},{default:M(()=>[S("p",null,J(t.name),1),S("span",Lt,J(t.artists.map(i=>i.name).join("/")),1)]),_:2},1032,["image-url","onClick"]))),256))])])],64)}}});var Ht=Ke(zt,[["__scopeId","data-v-d7c39b90"]]);export{Ht as default};
