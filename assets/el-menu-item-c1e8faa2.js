import{d as e,a9 as t,o as a,e as o,w as l,aa as n,ab as s,ac as u,u as r,ad as i,ae as d,af as p,ag as c,ah as v,ai as m,aj as h,c as f,ak as b,al as g,am as x,an as y,ao as M,j as I,ap as k,aq as C,B as S,ar as w,as as T,at as E,au as B,av as P,aw as $,ax as O,ay as A,l as z,v as N,F as H,az as L,aA as _,aB as j,aC as W,aD as q,aE as D,aF as F,aG as R,aH as G,aI as V,aJ as J,i as K,a as Z,m as Q,D as U,f as X,t as Y,aK as ee,aL as te}from"./index-4b10e46f.js";const ae=e({name:"ElCollapseTransition"});var oe=d(e({...ae,setup(e){const d=t("collapse-transition"),p={beforeEnter(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0},enter(e){e.dataset.oldOverflow=e.style.overflow,0!==e.scrollHeight?(e.style.maxHeight=`${e.scrollHeight}px`,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom):(e.style.maxHeight=0,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom),e.style.overflow="hidden"},afterEnter(e){e.style.maxHeight="",e.style.overflow=e.dataset.oldOverflow},beforeLeave(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.maxHeight=`${e.scrollHeight}px`,e.style.overflow="hidden"},leave(e){0!==e.scrollHeight&&(e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0)},afterLeave(e){e.style.maxHeight="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom}};return(e,t)=>(a(),o(i,s({name:r(d).b()},u(p)),{default:l((()=>[n(e.$slots,"default")])),_:3},16,["name"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);oe.install=e=>{e.component(oe.name,oe)};const le=oe;let ne=class{constructor(e,t){this.parent=e,this.domNode=t,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){const e=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,(t=>{t.addEventListener("keydown",(t=>{let a=!1;switch(t.code){case p.down:this.gotoSubIndex(this.subIndex+1),a=!0;break;case p.up:this.gotoSubIndex(this.subIndex-1),a=!0;break;case p.tab:c(e,"mouseleave");break;case p.enter:case p.space:a=!0,t.currentTarget.click()}return a&&(t.preventDefault(),t.stopPropagation()),!1}))}))}},se=class{constructor(e,t){this.domNode=e,this.submenu=null,this.submenu=null,this.init(t)}init(e){this.domNode.setAttribute("tabindex","0");const t=this.domNode.querySelector(`.${e}-menu`);t&&(this.submenu=new ne(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",(e=>{let t=!1;switch(e.code){case p.down:c(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),t=!0;break;case p.up:c(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),t=!0;break;case p.tab:c(e.currentTarget,"mouseleave");break;case p.enter:case p.space:t=!0,e.currentTarget.click()}t&&e.preventDefault()}))}},ue=class{constructor(e,t){this.domNode=e,this.init(t)}init(e){const t=this.domNode.childNodes;Array.from(t).forEach((t=>{1===t.nodeType&&new se(t,e)}))}};var re=d(e({name:"ElMenuCollapseTransition",setup(){const e=t("menu");return{listeners:{onBeforeEnter:e=>e.style.opacity="0.2",onEnter(t,a){v(t,`${e.namespace.value}-opacity-transition`),t.style.opacity="1",a()},onAfterEnter(t){m(t,`${e.namespace.value}-opacity-transition`),t.style.opacity=""},onBeforeLeave(t){t.dataset||(t.dataset={}),h(t,e.m("collapse"))?(m(t,e.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),v(t,e.m("collapse"))):(v(t,e.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),m(t,e.m("collapse"))),t.style.width=`${t.scrollWidth}px`,t.style.overflow="hidden"},onLeave(e){v(e,"horizontal-collapse-transition"),e.style.width=`${e.dataset.scrollWidth}px`}}}}}),[["render",function(e,t,u,r,d,p){return a(),o(i,s({mode:"out-in"},e.listeners),{default:l((()=>[n(e.$slots,"default")])),_:3},16)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-collapse-transition.vue"]]);function ie(e,t){const a=f((()=>{let a=e.parent;const o=[t.value];for(;"ElMenu"!==a.type.name;)a.props.index&&o.unshift(a.props.index),a=a.parent;return o}));return{parentMenu:f((()=>{let t=e.parent;for(;t&&!["ElMenu","ElSubMenu"].includes(t.type.name);)t=t.parent;return t})),indexPath:a}}function de(e){return f((()=>{const t=e.backgroundColor;return t?new b(t).shade(20).toString():""}))}const pe=(e,a)=>{const o=t("menu");return f((()=>o.cssVarBlock({"text-color":e.textColor||"","hover-text-color":e.textColor||"","bg-color":e.backgroundColor||"","hover-bg-color":de(e).value||"","active-color":e.activeTextColor||"",level:`${a}`})))},ce=g({index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0},popperOffset:{type:Number,default:6},expandCloseIcon:{type:L},expandOpenIcon:{type:L},collapseCloseIcon:{type:L},collapseOpenIcon:{type:L}}),ve="ElSubMenu";var me=e({name:ve,props:ce,setup(e,{slots:a,expose:o}){const l=x(),{indexPath:n,parentMenu:s}=ie(l,f((()=>e.index))),u=t("menu"),r=t("sub-menu"),i=y("rootMenu");i||M(ve,"can not inject root menu");const d=y(`subMenu:${s.value.uid}`);d||M(ve,"can not inject sub menu");const p=I({}),c=I({});let v;const m=I(!1),h=I(),b=I(null),g=f((()=>"horizontal"===K.value&&j.value?"bottom-start":"right-start")),L=f((()=>"horizontal"===K.value&&j.value||"vertical"===K.value&&!i.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?F.value?e.expandOpenIcon:e.expandCloseIcon:k:e.collapseCloseIcon&&e.collapseOpenIcon?F.value?e.collapseOpenIcon:e.collapseCloseIcon:C)),j=f((()=>0===d.level)),W=f((()=>void 0===e.popperAppendToBody?j.value:Boolean(e.popperAppendToBody))),q=f((()=>i.props.collapse?`${u.namespace.value}-zoom-in-left`:`${u.namespace.value}-zoom-in-top`)),D=f((()=>"horizontal"===K.value&&j.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","left-start","bottom-start","bottom-end","top-start","top-end"])),F=f((()=>i.openedMenus.includes(e.index))),R=f((()=>{let e=!1;return Object.values(p.value).forEach((t=>{t.active&&(e=!0)})),Object.values(c.value).forEach((t=>{t.active&&(e=!0)})),e})),G=f((()=>i.props.backgroundColor||"")),V=f((()=>i.props.activeTextColor||"")),J=f((()=>i.props.textColor||"")),K=f((()=>i.props.mode)),Z=S({index:e.index,indexPath:n,active:R}),Q=f((()=>"horizontal"!==K.value?{color:J.value}:{borderBottomColor:R.value?i.props.activeTextColor?V.value:"":"transparent",color:R.value?V.value:J.value})),U=e=>{var t,a,o;e||null==(o=null==(a=null==(t=b.value)?void 0:t.popperRef)?void 0:a.popperInstanceRef)||o.destroy()},X=()=>{"hover"===i.props.menuTrigger&&"horizontal"===i.props.mode||i.props.collapse&&"vertical"===i.props.mode||e.disabled||i.handleSubMenuClick({index:e.index,indexPath:n.value,active:R.value})},Y=(t,a=e.showTimeout)=>{var o;"focus"!==t.type&&("click"===i.props.menuTrigger&&"horizontal"===i.props.mode||!i.props.collapse&&"vertical"===i.props.mode||e.disabled||(d.mouseInChild.value=!0,null==v||v(),({stop:v}=_((()=>{i.openMenu(e.index,n.value)}),a)),W.value&&(null==(o=s.value.vnode.el)||o.dispatchEvent(new MouseEvent("mouseenter")))))},ee=(t=!1)=>{var a,o;"click"===i.props.menuTrigger&&"horizontal"===i.props.mode||!i.props.collapse&&"vertical"===i.props.mode||(null==v||v(),d.mouseInChild.value=!1,({stop:v}=_((()=>!m.value&&i.closeMenu(e.index,n.value)),e.hideTimeout)),W.value&&t&&"ElSubMenu"===(null==(a=l.parent)?void 0:a.type.name)&&(null==(o=d.handleMouseleave)||o.call(d,!0)))};w((()=>i.props.collapse),(e=>U(Boolean(e))));{const e=e=>{c.value[e.index]=e},t=e=>{delete c.value[e.index]};T(`subMenu:${l.uid}`,{addSubMenu:e,removeSubMenu:t,handleMouseleave:ee,mouseInChild:m,level:d.level+1})}return o({opened:F}),E((()=>{i.addSubMenu(Z),d.addSubMenu(Z)})),B((()=>{d.removeSubMenu(Z),i.removeSubMenu(Z)})),()=>{var t;const o=[null==(t=a.title)?void 0:t.call(a),P(O,{class:r.e("icon-arrow"),style:{transform:F.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&i.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>$(L.value)?P(l.appContext.components[L.value]):P(L.value)})],n=pe(i.props,d.level+1),s=i.isMenuPopup?P(A,{ref:b,visible:F.value,effect:"light",pure:!0,offset:e.popperOffset,showArrow:!1,persistent:!0,popperClass:e.popperClass,placement:g.value,teleported:W.value,fallbackPlacements:D.value,transition:q.value,gpuAcceleration:!1},{content:()=>{var t;return P("div",{class:[u.m(K.value),u.m("popup-container"),e.popperClass],onMouseenter:e=>Y(e,100),onMouseleave:()=>ee(!0),onFocus:e=>Y(e,100)},[P("ul",{class:[u.b(),u.m("popup"),u.m(`popup-${g.value}`)],style:n.value},[null==(t=a.default)?void 0:t.call(a)])])},default:()=>P("div",{class:r.e("title"),style:[Q.value,{backgroundColor:G.value}],onClick:X},o)}):P(H,{},[P("div",{class:r.e("title"),style:[Q.value,{backgroundColor:G.value}],ref:h,onClick:X},o),P(le,{},{default:()=>{var e;return z(P("ul",{role:"menu",class:[u.b(),u.m("inline")],style:n.value},[null==(e=a.default)?void 0:e.call(a)]),[[N,F.value]])}})]);return P("li",{class:[r.b(),r.is("active",R.value),r.is("opened",F.value),r.is("disabled",e.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:F.value,onMouseenter:Y,onMouseleave:()=>ee(!0),onFocus:Y},[s])}}});const he=g({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:D(Array),default:()=>F([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperEffect:{type:String,values:["dark","light"],default:"dark"}}),fe=e=>Array.isArray(e)&&e.every((e=>$(e)));var be=e({name:"ElMenu",props:he,emits:{close:(e,t)=>$(e)&&fe(t),open:(e,t)=>$(e)&&fe(t),select:(e,t,a,o)=>$(e)&&fe(t)&&R(a)&&(void 0===o||o instanceof Promise)},setup(e,{emit:a,slots:o,expose:l}){const n=x(),s=n.appContext.config.globalProperties.$router,u=I(),r=t("menu"),i=t("sub-menu"),d=I(-1),p=I(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),c=I(e.defaultActive),v=I({}),m=I({}),h=f((()=>"horizontal"===e.mode||"vertical"===e.mode&&e.collapse)),b=(t,o)=>{p.value.includes(t)||(e.uniqueOpened&&(p.value=p.value.filter((e=>o.includes(e)))),p.value.push(t),a("open",t,o))},g=(e,t)=>{const o=p.value.indexOf(e);-1!==o&&p.value.splice(o,1),a("close",e,t)},y=({index:e,indexPath:t})=>{p.value.includes(e)?g(e,t):b(e,t)},M=t=>{("horizontal"===e.mode||e.collapse)&&(p.value=[]);const{index:o,indexPath:l}=t;if(void 0!==o&&void 0!==l)if(e.router&&s){const e=t.route||o,n=s.push(e).then((e=>(e||(c.value=o),e)));a("select",o,l,{index:o,indexPath:l,route:e},n)}else c.value=o,a("select",o,l,{index:o,indexPath:l})};let k=!0;const C=()=>{const e=()=>{d.value=-1,V((()=>{d.value=(()=>{var e,t;if(!u.value)return-1;const a=Array.from(null!=(t=null==(e=u.value)?void 0:e.childNodes)?t:[]).filter((e=>"#text"!==e.nodeName||e.nodeValue)),o=Number.parseInt(getComputedStyle(u.value).paddingLeft,10),l=Number.parseInt(getComputedStyle(u.value).paddingRight,10),n=u.value.clientWidth-o-l;let s=0,r=0;return a.forEach(((e,t)=>{s+=e.offsetWidth||0,s<=n-64&&(r=t+1)})),r===a.length?-1:r})()}))};k?e():((e,t=33.34)=>{let a;return()=>{a&&clearTimeout(a),a=setTimeout((()=>{e()}),t)}})(e)(),k=!1};let B;w((()=>e.defaultActive),(t=>{v.value[t]||(c.value=""),(t=>{const a=v.value,o=a[t]||c.value&&a[c.value]||a[e.defaultActive];c.value=o?o.index:t})(t)})),w((()=>e.collapse),(e=>{e&&(p.value=[])})),w(v.value,(()=>{const t=c.value&&v.value[c.value];if(!t||"horizontal"===e.mode||e.collapse)return;t.indexPath.forEach((e=>{const t=m.value[e];t&&b(e,t.indexPath)}))})),j((()=>{"horizontal"===e.mode&&e.ellipsis?B=G(u,C).stop:null==B||B()}));{const t=e=>{m.value[e.index]=e},a=e=>{delete m.value[e.index]},o=e=>{v.value[e.index]=e},l=e=>{delete v.value[e.index]};T("rootMenu",S({props:e,openedMenus:p,items:v,subMenus:m,activeIndex:c,isMenuPopup:h,addMenuItem:o,removeMenuItem:l,addSubMenu:t,removeSubMenu:a,openMenu:b,closeMenu:g,handleMenuItemClick:M,handleSubMenuClick:y})),T(`subMenu:${n.uid}`,{addSubMenu:t,removeSubMenu:a,mouseInChild:I(!1),level:0})}E((()=>{"horizontal"===e.mode&&new ue(n.vnode.el,r.namespace.value)}));l({open:e=>{const{indexPath:t}=m.value[e];t.forEach((e=>b(e,t)))},close:g,handleResize:C});return()=>{var t,a;let l=null!=(a=null==(t=o.default)?void 0:t.call(o))?a:[];const n=[];if("horizontal"===e.mode&&u.value){const t=W(l),a=-1===d.value?t:t.slice(0,d.value),o=-1===d.value?[]:t.slice(d.value);(null==o?void 0:o.length)&&e.ellipsis&&(l=a,n.push(P(me,{index:"sub-menu-more",class:i.e("hide-arrow")},{title:()=>P(O,{class:i.e("icon-more")},{default:()=>P(q)}),default:()=>o})))}const s=pe(e,0),p=P("ul",{key:String(e.collapse),role:"menubar",ref:u,style:s.value,class:{[r.b()]:!0,[r.m(e.mode)]:!0,[r.m("collapse")]:e.collapse}},[...l,...n]);return e.collapseTransition&&"vertical"===e.mode?P(re,(()=>p)):p}}});const ge=g({index:{type:D([String,null]),default:null},route:{type:D([String,Object])},disabled:Boolean}),xe="ElMenuItem";var ye=d(e({name:xe,components:{ElTooltip:A},props:ge,emits:{click:e=>$(e.index)&&Array.isArray(e.indexPath)},setup(e,{emit:a}){const o=x(),l=y("rootMenu"),n=t("menu"),s=t("menu-item");l||M(xe,"can not inject root menu");const{parentMenu:u,indexPath:r}=ie(o,J(e,"index")),i=y(`subMenu:${u.value.uid}`);i||M(xe,"can not inject sub menu");const d=f((()=>e.index===l.activeIndex)),p=S({index:e.index,indexPath:r,active:d});return E((()=>{i.addSubMenu(p),l.addMenuItem(p)})),B((()=>{i.removeSubMenu(p),l.removeMenuItem(p)})),{parentMenu:u,rootMenu:l,active:d,nsMenu:n,nsMenuItem:s,handleClick:()=>{e.disabled||(l.handleMenuItemClick({index:e.index,indexPath:r.value,route:e.route}),a("click",p))}}}}),[["render",function(e,t,s,u,r,i){const d=K("el-tooltip");return a(),Z("li",{class:U([e.nsMenuItem.b(),e.nsMenuItem.is("active",e.active),e.nsMenuItem.is("disabled",e.disabled)]),role:"menuitem",tabindex:"-1",onClick:t[0]||(t[0]=(...t)=>e.handleClick&&e.handleClick(...t))},["ElMenu"===e.parentMenu.type.name&&e.rootMenu.props.collapse&&e.$slots.title?(a(),o(d,{key:0,effect:e.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:l((()=>[n(e.$slots,"title")])),default:l((()=>[Q("div",{class:U(e.nsMenu.be("tooltip","trigger"))},[n(e.$slots,"default")],2)])),_:3},8,["effect"])):(a(),Z(H,{key:1},[n(e.$slots,"default"),n(e.$slots,"title")],64))],2)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item.vue"]]);var Me=d(e({name:"ElMenuItemGroup",props:{title:String},setup:()=>({ns:t("menu-item-group")})}),[["render",function(e,t,o,l,s,u){return a(),Z("li",{class:U(e.ns.b())},[Q("div",{class:U(e.ns.e("title"))},[e.$slots.title?n(e.$slots,"title",{key:1}):(a(),Z(H,{key:0},[X(Y(e.title),1)],64))],2),Q("ul",null,[n(e.$slots,"default")])],2)}],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item-group.vue"]]);const Ie=ee(be,{MenuItem:ye,MenuItemGroup:Me,SubMenu:me}),ke=te(ye);te(Me),te(me);export{Ie as E,ke as a};
