import{aQ as e,aC as a,aR as t,al as l,aS as n,am as i,j as o,c as s,u as r,aT as u,ar as c,at as d,aH as v,au as m,as as p,aw as f,d as h,a9 as g,o as y,a as C,m as k,e as I,w as b,l as _,D as w,aU as x,b as M,ax as S,aV as T,v as B,ad as E,H as L,aq as N,aa as j,a5 as z,F as A,r as U,t as V,ae as H,an as $,B as D,aW as O,aX as P,aK as R,aL as W,M as F,k as K,a3 as X,y as Y,V as q,aY as G,i as J,f as Q,aZ as Z,G as ee,R as ae,a_ as te,a6 as le,L as ne,J as ie,_ as oe}from"./index-4ff561e7.js";import{C as se}from"./index-480e27a4.js";import{a as re,b as ue,c as ce,C as de,d as ve,e as me}from"./recommend-f1e98004.js";import{u as pe}from"./typeFormate-147c73de.js";import"./count-e681277b.js";const fe=Symbol("carouselContextKey"),he=(l,n)=>{const i={},o=e([]);return{children:o,addChild:e=>{i[e.uid]=e,o.value=((e,l,n)=>a(e.subTree).filter((e=>{var a;return t(e)&&(null==(a=e.type)?void 0:a.name)===l&&!!e.component})).map((e=>e.component.uid)).map((e=>n[e])).filter((e=>!!e)))(l,n,i)},removeChild:e=>{delete i[e],o.value=o.value.filter((a=>a.uid!==e))}}},ge=l({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},indicator:{type:Boolean,default:!0},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),ye={change:(e,a)=>[e,a].every(n)},Ce=(a,t,l)=>{const{children:n,addChild:h,removeChild:g}=he(i(),"ElCarouselItem"),y=o(-1),C=o(null),k=o(!1),I=o(),b=s((()=>"never"!==a.arrow&&!r(x))),_=s((()=>n.value.some((e=>e.props.label.toString().length>0)))),w=s((()=>"card"===a.type)),x=s((()=>"vertical"===a.direction)),M=u((e=>{L(e)}),300,{trailing:!0}),S=u((e=>{!function(e){"hover"===a.trigger&&e!==y.value&&(y.value=e)}(e)}),300);function T(){C.value&&(clearInterval(C.value),C.value=null)}function B(){a.interval<=0||!a.autoplay||C.value||(C.value=setInterval((()=>E()),a.interval))}const E=()=>{y.value<n.value.length-1?y.value=y.value+1:a.loop&&(y.value=0)};function L(e){if(f(e)){const a=n.value.filter((a=>a.props.name===e));a.length>0&&(e=n.value.indexOf(a[0]))}if(e=Number(e),Number.isNaN(e)||e!==Math.floor(e))return;const t=n.value.length,l=y.value;y.value=e<0?a.loop?t-1:0:e>=t?a.loop?0:t-1:e,l===y.value&&N(l),j()}function N(e){n.value.forEach(((a,t)=>{a.translateItem(t,y.value,e)}))}function j(){T(),B()}c((()=>y.value),((e,a)=>{N(a),a>-1&&t("change",e,a)})),c((()=>a.autoplay),(e=>{e?B():T()})),c((()=>a.loop),(()=>{L(y.value)})),c((()=>a.interval),(()=>{j()})),c((()=>n.value),(()=>{n.value.length>0&&L(a.initialIndex)}));const z=e();return d((()=>{z.value=v(I.value,(()=>{N()})),B()})),m((()=>{T(),I.value&&z.value&&z.value.stop()})),p(fe,{root:I,isCardType:w,isVertical:x,items:n,loop:a.loop,addItem:h,removeItem:g,setActiveItem:L}),{root:I,activeIndex:y,arrowDisplay:b,hasLabel:_,hover:k,isCardType:w,items:n,handleButtonEnter:function(e){r(x)||n.value.forEach(((a,t)=>{e===function(e,a){var t,l,i,o;const s=r(n),u=s.length;if(0===u||!e.states.inStage)return!1;const c=a+1,d=a-1,v=u-1,m=s[v].states.active,p=s[0].states.active,f=null==(l=null==(t=s[c])?void 0:t.states)?void 0:l.active,h=null==(o=null==(i=s[d])?void 0:i.states)?void 0:o.active;return a===v&&p||f?"left":!!(0===a&&m||h)&&"right"}(a,t)&&(a.states.hover=!0)}))},handleButtonLeave:function(){r(x)||n.value.forEach((e=>{e.states.hover=!1}))},handleIndicatorClick:function(e){y.value=e},handleMouseEnter:function(){k.value=!0,a.pauseOnHover&&T()},handleMouseLeave:function(){k.value=!1,B()},setActiveItem:L,prev:function(){L(y.value-1)},next:function(){L(y.value+1)},throttledArrowClick:M,throttledIndicatorHover:S}},ke=["onMouseenter","onClick"],Ie={key:0},be=h({name:"ElCarousel"});var _e=H(h({...be,props:ge,emits:ye,setup(e,{expose:a,emit:t}){const l=e,{root:n,activeIndex:i,arrowDisplay:o,hasLabel:u,hover:c,isCardType:d,items:v,handleButtonEnter:m,handleButtonLeave:p,handleIndicatorClick:f,handleMouseEnter:h,handleMouseLeave:H,setActiveItem:$,prev:D,next:O,throttledArrowClick:P,throttledIndicatorHover:R}=Ce(l,t),W=g("carousel"),F=s((()=>{const e=[W.b(),W.m(l.direction)];return r(d)&&e.push(W.m("card")),e})),K=s((()=>{const e=[W.e("indicators"),W.em("indicators",l.direction)];return r(u)&&e.push(W.em("indicators","labels")),("outside"===l.indicatorPosition||r(d))&&e.push(W.em("indicators","outside")),e}));return a({setActiveItem:$,prev:D,next:O}),(e,a)=>(y(),C("div",{ref_key:"root",ref:n,class:w(r(F)),onMouseenter:a[6]||(a[6]=x(((...e)=>r(h)&&r(h)(...e)),["stop"])),onMouseleave:a[7]||(a[7]=x(((...e)=>r(H)&&r(H)(...e)),["stop"]))},[k("div",{class:w(r(W).e("container")),style:z({height:e.height})},[r(o)?(y(),I(E,{key:0,name:"carousel-arrow-left",persisted:""},{default:b((()=>[_(k("button",{type:"button",class:w([r(W).e("arrow"),r(W).em("arrow","left")]),onMouseenter:a[0]||(a[0]=e=>r(m)("left")),onMouseleave:a[1]||(a[1]=(...e)=>r(p)&&r(p)(...e)),onClick:a[2]||(a[2]=x((e=>r(P)(r(i)-1)),["stop"]))},[M(r(S),null,{default:b((()=>[M(r(T))])),_:1})],34),[[B,("always"===e.arrow||r(c))&&(l.loop||r(i)>0)]])])),_:1})):L("v-if",!0),r(o)?(y(),I(E,{key:1,name:"carousel-arrow-right",persisted:""},{default:b((()=>[_(k("button",{type:"button",class:w([r(W).e("arrow"),r(W).em("arrow","right")]),onMouseenter:a[3]||(a[3]=e=>r(m)("right")),onMouseleave:a[4]||(a[4]=(...e)=>r(p)&&r(p)(...e)),onClick:a[5]||(a[5]=x((e=>r(P)(r(i)+1)),["stop"]))},[M(r(S),null,{default:b((()=>[M(r(N))])),_:1})],34),[[B,("always"===e.arrow||r(c))&&(l.loop||r(i)<r(v).length-1)]])])),_:1})):L("v-if",!0),j(e.$slots,"default")],6),"none"!==e.indicatorPosition?(y(),C("ul",{key:0,class:w(r(K))},[(y(!0),C(A,null,U(r(v),((a,t)=>(y(),C("li",{key:t,class:w([r(W).e("indicator"),r(W).em("indicator",e.direction),r(W).is("active",t===r(i))]),onMouseenter:e=>r(R)(t),onClick:x((e=>r(f)(t)),["stop"])},[k("button",{class:w(r(W).e("button"))},[r(u)?(y(),C("span",Ie,V(a.props.label),1)):L("v-if",!0)],2)],42,ke)))),128))],2)):L("v-if",!0)],34))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const we=l({name:{type:String,default:""},label:{type:[String,Number],default:""}}),xe=(e,a)=>{const t=$(fe),l=i(),n=.83,s=o(!1),u=o(0),c=o(1),v=o(!1),m=o(!1),p=o(!1),f=o(!1),{isCardType:h,isVertical:g}=t;const y=(e,a,l)=>{var i;const o=r(h),s=null!=(i=t.items.value.length)?i:Number.NaN,d=e===a;o||P(l)||(f.value=d||e===l),!d&&s>2&&t.loop&&(e=function(e,a,t){const l=t-1,n=t/2;return 0===a&&e===l?-1:a===l&&0===e?t:e<a-1&&a-e>=n?t+1:e>a+1&&e-a>=n?-2:e}(e,a,s));const y=r(g);v.value=d,o?(p.value=Math.round(Math.abs(e-a))<=1,u.value=function(e,a){var l;const n=(null==(l=t.root.value)?void 0:l.offsetWidth)||0;return p.value?n*(1.17*(e-a)+1)/4:e<a?-1.83*n/4:3.83*n/4}(e,a),c.value=r(v)?1:n):u.value=function(e,a,l){const n=t.root.value;return n?((l?n.offsetHeight:n.offsetWidth)||0)*(e-a):0}(e,a,y),m.value=!0};return d((()=>{t.addItem({props:e,states:D({hover:s,translate:u,scale:c,active:v,ready:m,inStage:p,animating:f}),uid:l.uid,translateItem:y})})),O((()=>{t.removeItem(l.uid)})),{active:v,animating:f,hover:s,inStage:p,isVertical:g,translate:u,isCardType:h,scale:c,ready:m,handleItemClick:function(){if(t&&r(h)){const e=t.items.value.findIndex((({uid:e})=>e===l.uid));t.setActiveItem(e)}}}},Me=h({name:"ElCarouselItem"});var Se=H(h({...Me,props:we,setup(e){const a=e,t=g("carousel"),{active:l,animating:n,hover:i,inStage:o,isVertical:u,translate:c,isCardType:d,scale:v,ready:m,handleItemClick:p}=xe(a),f=s((()=>({transform:[`${"translate"+(r(u)?"Y":"X")}(${r(c)}px)`,`scale(${r(v)})`].join(" ")})));return(e,a)=>_((y(),C("div",{class:w([r(t).e("item"),r(t).is("active",r(l)),r(t).is("in-stage",r(o)),r(t).is("hover",r(i)),r(t).is("animating",r(n)),{[r(t).em("item","card")]:r(d)}]),style:z(r(f)),onClick:a[0]||(a[0]=(...e)=>r(p)&&r(p)(...e))},[r(d)?_((y(),C("div",{key:0,class:w(r(t).e("mask"))},null,2)),[[B,!r(l)]]):L("v-if",!0),j(e.$slots,"default")],6)),[[B,r(m)]])}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const Te=R(_e,{CarouselItem:Se}),Be=W(Se),Ee={class:"banner-item"},Le={class:"flex-vertical-center"},Ne={class:"grid-col5"},je={class:"flex-vertical-center"},ze={class:"grid-col3"},Ae={class:"flex-vertical-center"},Ue={class:"grid-col3"},Ve={class:"text-12"},He={class:"flex-vertical-center"},$e={class:"grid-col3"},De=oe(h({__name:"Recommend",setup(e){const a=F(),{playImmediately:t}=K(),l=o([]);re().then((e=>{l.value=e})).catch((e=>{"网络异常"===e&&X({message:"系统异常",type:"error",duration:1e3,center:!0})}));const n=o(0);function i(e){n.value=e}const s=o([]),{hasLogin:u}=Y(q());function d(){a.push("/dailySongs")}c(u,(e=>{e?ve().then((e=>{s.value=e.slice(0,9)})):me(10).then((e=>{s.value=e}))}),{immediate:!0});const v=D([]);G(0).then((e=>{v.push(...e.slice(0,12))}));const m=o([]);function p(e){a.push(`/mv/${e}`)}ue().then((e=>{m.value=e}));const f=o();return ce().then((e=>{f.value=e})),(e,a)=>{const o=ne,c=Be,h=Te,g=J("router-link"),_=ie;return y(),C(A,null,[M(h,{interval:4e3,type:"card",height:"220px",onChange:i},{default:b((()=>[(y(!0),C(A,null,U(l.value,((e,a)=>(y(),I(c,{key:a,onClick:a=>function(e){const a=l.value.findIndex((a=>a.imageUrl===e.imageUrl));n.value===a&&(1!==e.targetType?(10===e.targetType&&le(e.targetId),1e3===e.targetType&&ee(e.targetId),e.url&&window.open(e.url,"_blank")):te([e.targetId]).then((e=>{t(e[0])})))}(e)},{default:b((()=>[k("div",Ee,[M(o,{src:e.imageUrl},null,8,["src"]),k("div",{class:"title",style:z({backgroundColor:e.titleColor})},V(e.typeTitle),5)])])),_:2},1032,["onClick"])))),128))])),_:1}),k("div",Le,[M(g,{to:"/discover/playlist"},{default:b((()=>[k("h3",null,[Q("推荐歌单"),M(r(Z),{theme:"outline",size:"22"})])])),_:1})]),k("div",Ne,[r(u)?(y(),I(se,{key:0,class:"relative daily-songs",mode:"vertical","image-url":r("/vue3-music/assets/dailySongsBg-2d9b6e0f.jpg"),"icon-placement":"bottom-right","icon-transition":"el-fade-in-linear",onClick:d},{default:b((()=>[M(r(de),{theme:"outline",fill:"#ffffff",onClick:d}),M(_,{underline:!1,onClick:d},{default:b((()=>[Q("每日歌曲推荐")])),_:1})])),_:1},8,["image-url"])):L("",!0),(y(!0),C(A,null,U(s.value,(e=>(y(),I(se,{mode:"vertical","image-url":e.picUrl,"play-count":e.playCount,"icon-placement":"bottom-right","icon-transition":"el-fade-in-linear",onClick:a=>r(ee)(e.id)},{default:b((()=>[M(_,{underline:!1,onClick:a=>r(ee)(e.id)},{default:b((()=>[Q(V(e.name),1)])),_:2},1032,["onClick"])])),_:2},1032,["image-url","play-count","onClick"])))),256))]),k("div",je,[M(g,{to:"/privateMVList"},{default:b((()=>[k("h3",null,[Q("独家放送"),M(r(Z),{theme:"outline",size:"22"})])])),_:1})]),k("div",ze,[(y(!0),C(A,null,U(f.value,(e=>(y(),I(se,{mode:"vertical","image-url":e.picUrl,"icon-placement":"top-left","icon-transition":"only-show",onClick:a=>p(e.id)},{default:b((()=>[M(_,{underline:!1,onClick:a=>p(e.id)},{default:b((()=>[Q(V(e.name),1)])),_:2},1032,["onClick"])])),_:2},1032,["image-url","onClick"])))),256))]),k("div",Ae,[M(g,{to:"/discover/new/songs"},{default:b((()=>[k("h3",null,[Q("最新音乐"),M(r(Z),{theme:"outline",size:"22"})])])),_:1})]),k("div",Ue,[(y(!0),C(A,null,U(v,(e=>(y(),I(se,{mode:"horizontal","image-url":e.album.picUrl,"image-size":"100px","icon-placement":"center","icon-transition":"only-show",onClick:a=>function(e){const a=v.findIndex((a=>a.id===e));t(pe(v[a]))}(e.id)},{default:b((()=>[k("p",null,V(e.name),1),k("span",Ve,[M(ae,{artists:e.artists},null,8,["artists"])])])),_:2},1032,["image-url","onClick"])))),256))]),k("div",He,[M(g,{to:"/video/mv"},{default:b((()=>[k("h3",null,[Q("推荐MV"),M(r(Z),{theme:"outline",size:"22"})])])),_:1})]),k("div",$e,[(y(!0),C(A,null,U(m.value,(e=>(y(),I(se,{mode:"vertical","image-url":e.picUrl,onClick:a=>p(e.id)},{default:b((()=>[M(_,{underline:!1,onClick:a=>p(e.id)},{default:b((()=>[Q(V(e.name),1)])),_:2},1032,["onClick"]),k("div",null,[M(ae,{artists:e.artists},null,8,["artists"])])])),_:2},1032,["image-url","onClick"])))),256))])],64)}}}),[["__scopeId","data-v-5c92f179"]]);export{De as default};
