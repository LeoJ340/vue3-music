import{d as e,j as a,V as s,y as t,o as l,e as n,w as c,b as o,m as r,u,q as d,a as i,F as v,r as m,t as p,bC as h,a3 as f,aO as g,av as b,bD as y,bE as x,L as k,E as _,bF as w,s as C,x as V,_ as L,bG as E}from"./index-dc3d111f.js";const B=e=>(C("data-v-09b496b7"),e=e(),V(),e),P=B((()=>r("div",{class:"header"},[r("h3",null,"收藏到歌单")],-1))),U=B((()=>r("div",{class:"flex-vertical-center",style:{"margin-left":"10px"}},"创建为新歌单",-1))),j=["onClick"],F={style:{"margin-left":"10px"}},I=L(e({__name:"index",props:{tracks:null},setup(e,{expose:C}){const V=e,L=a(!1),E=s(),{getMyPlayList:B}=E,{myPlayList:I}=t(E);const M=a(!1);function q(){g.prompt((()=>b(y,{modelValue:M.value,label:"设置为隐私歌单","onUpdate:modelValue":e=>{M.value=e}})),"新建歌单",{confirmButtonText:"创建",showCancelButton:!1,inputPattern:/^[^@#]+$/,inputErrorMessage:"歌单名不能包含@或#",center:!0,roundButton:!0,draggable:!0}).then((async({value:e})=>{const a=await x(e,M.value);h("add",a,V.tracks).then((()=>{L.value=!1,f({message:"已收藏到歌单",type:"success",duration:1e3,center:!0}),B()}))})).catch((()=>{}))}return C({show:function(){I.value.created.length&&(L.value=!0)},tracks:V.tracks}),(e,a)=>{const s=k,t=_,g=w;return l(),n(g,{modelValue:L.value,"onUpdate:modelValue":a[0]||(a[0]=e=>L.value=e),"custom-class":"to-playlist-dialog",width:"30%",center:"",draggable:""},{header:c((()=>[P])),default:c((()=>[o(t,{"view-style":"height: 70%;"},{default:c((()=>[r("div",{class:"flex add",onClick:q},[o(u(d),{theme:"filled",size:"50",fill:"#ec4141",strokeWidth:1,class:"icon flex-center"}),U]),(l(!0),i(v,null,m(u(I).created,(e=>(l(),i("div",{class:"flex playlist",onClick:a=>{return s=e.id,void h("add",s,V.tracks).then((()=>{L.value=!1,f({message:"已收藏到歌单",type:"success",duration:1e3,center:!0})}));var s}},[o(s,{src:e.coverImgUrl,fit:"cover"},null,8,["src"]),r("div",F,[r("p",null,p(e.name),1),r("p",null,p(e.trackCount)+"首音乐",1)])],8,j)))),256))])),_:1})])),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-09b496b7"]]),M=s(),{toLogin:q}=M,{hasLogin:z}=t(M);let D=null;function G(e){z.value?(D||function(e){D=E(I,{tracks:e});const a=document.createElement("div");document.body.appendChild(a),D.mount(a)}(e),D._instance.exposed.show()):q()}export{G as t};
